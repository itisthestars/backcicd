import{aS as z,aE as Q,T as k,o as c,aX as d,aY as ee,aZ as te,a_ as M,a$ as oe,b as F,r as h,a2 as le,F as q,e as g,W as o,U as l,R as I,aG as w,ai as f,Y as ae,f as ne,u as re,aT as se}from"./vendor-nO9PoXSl.js";import{u as ue,p as ie}from"./common-DwxKJ2w1.js";import{w as me,x as de,y as C,z as _e,u as ce,A as D,B as j,q as G,s as H,C as pe,n as W,o as fe,D as he,F as ge,b as Y,v as X,G as ve,E as U}from"./element-plus-F1hSz9Da.js";import{g as $}from"./shared/index-2/login-yFP1Qp38.js";import{g as Z}from"./shared/index-2/index-3-CwIEsQz5.js";const be={__name:"App",setup(m){return(u,i)=>{const _=Q("router-view");return c(),k(_)}}},Pe=z(be,[["__scopeId","data-v-2d6945a7"]]),ye={path:"/",name:"layout",redirect:"/home",component:()=>d(()=>import("./layout-CdWeJtCT.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),meta:{parentPath:""},children:[{path:"/home",name:"homePage",component:()=>d(()=>import("./home-B5P9YgiB.js"),__vite__mapDeps([7,2,3,8]),import.meta.url),meta:{isShow:!0,title:"默认首页",icon:me,parentPath:"layout"},children:[]},{path:"/project",name:"ProjectPage",component:()=>d(()=>import("./index-BU4oPi4h.js"),__vite__mapDeps([9,1,2,3,4,5,10]),import.meta.url),meta:{isShow:!0,title:"项目列表",icon:de,parentPath:"layout"},children:[]},{path:"/parent",name:"ParentPage",component:()=>d(()=>import("./index-BU4oPi4h.js"),__vite__mapDeps([9,1,2,3,4,5,10]),import.meta.url),meta:{isShow:!0,title:"父页面",icon:_e,parentPath:"layout"},children:[{path:"/child1",name:"ChildPage1",component:()=>d(()=>import("./index-BU4oPi4h.js"),__vite__mapDeps([9,1,2,3,4,5,10]),import.meta.url),meta:{isShow:!0,title:"子页面1",icon:C,parentPath:"ParentPage"},children:[]},{path:"/child2",name:"ChildPage2",component:()=>d(()=>import("./index-BU4oPi4h.js"),__vite__mapDeps([9,1,2,3,4,5,10]),import.meta.url),meta:{isShow:!0,title:"子页面2",icon:C,parentPath:"ParentPage"},children:[]}]},{path:"/user",name:"UserPage",component:()=>d(()=>Promise.resolve().then(()=>we),void 0,import.meta.url),meta:{isShow:!0,title:"用户模块",icon:ce,parentPath:"layout"},children:[]},{path:"/role",name:"RolePage",component:()=>d(()=>Promise.resolve().then(()=>Re),void 0,import.meta.url),meta:{isShow:!0,title:"角色模块",icon:D,parentPath:"layout"},children:[]},{path:"/item",name:"ItemPage",component:()=>d(()=>Promise.resolve().then(()=>De),void 0,import.meta.url),meta:{isShow:!0,title:"项目列表",icon:D,parentPath:"layout"},children:[]},{path:"/auth",name:"AuthPage",component:()=>d(()=>import("./index-B2xpQzuR.js"),__vite__mapDeps([11,1,2,3,4,5,12]),import.meta.url),meta:{isShow:!0,title:"权限列表",icon:j,parentPath:"layout"},children:[]},{path:"/about",name:"aboutPage",component:()=>d(()=>import("./index-DkqYOgAT.js"),__vite__mapDeps([13,2,3,14]),import.meta.url),meta:{isShow:!0,title:"关于我们",icon:j,parentPath:"layout"},children:[]}]},Ee=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),Ie={path:"/login",name:"login",component:()=>d(()=>import("./login-BBHN9Pyv.js"),__vite__mapDeps([15,1,2,3,4,5,16,17]),import.meta.url),meta:{},children:[]},ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),Ve={path:"/about",name:"about",component:()=>d(()=>import("./index-DkqYOgAT.js"),__vite__mapDeps([13,2,3,14]),import.meta.url),meta:{},children:[]},B=Object.assign({"./modules/home.ts":Ee,"./modules/login.ts":ke}),L=[];Object.keys(B).forEach(m=>{const u=B[m].default;L.push(u)});L.push(Ve);const V=ee({history:te(),routes:L}),Se=m=>{console.log(m);const u=V.getRoutes();console.log(u);const i=[];for(;;){i.push(m);const r=u.find(n=>n.name===m),s=u.find(n=>n.name===(r==null?void 0:r.meta.parentPath));if(s){m=s.name;continue}else break}ue().setBreadCrumbs(i.reverse())},Ne=["/login"];V.beforeEach(async(m,u,i)=>{M.start(),!!sessionStorage.getItem("userInfo")||Ne.includes(m.path)?i():i("/login"),Se(m.name)});V.afterEach(m=>{M.done()});const R=oe(Pe);R.use(V);R.use(ie);R.mount("#app");const Oe={class:"dialog-footer"},Te=F({__name:"index",setup(m){const u=h([]),i=h([]),_=h([]),r=le({roleId:0,nickName:""}),s=h(!1),n=h({id:0,nickName:"",role:[]}),P=()=>{if(console.log("查询",r.roleId,r.nickName),r.roleId===0&&r.nickName==="")$().then(t=>{u.value=t.data,console.log(t)});else{let t=[];r.nickName!==""&&(t=i.value.filter(e=>e.nickName.includes(r.nickName))),r.roleId!==0&&(t=r.nickName!==""?t:i.value,u.value=t.filter(e=>e.role.find(p=>p.role===r.roleId)))}console.log(u.value)},S=t=>{console.log("编辑行数据",t),n.value={id:t.id,nickName:t.nickName,role:t.role.map(e=>e.role)},s.value=!0,console.log("编辑",n.value)},N=()=>{s.value=!1;let t=u.value.find(e=>e.id===n.value.id);console.log("obj",t),t.nickName=n.value.nickName,t.role=[],console.log(" editUser.value.role",n.value.role),n.value.role.forEach(e=>{_.value.forEach(p=>{e===p.roleId&&(t==null||t.role.push({role:p.roleId,roleName:p.roleName}))})}),console.log("修改后的obj",t)};return console.log((t=>t+1)(1)),q(()=>{$().then(t=>{u.value=t.data,i.value=t.data,console.log(t)}),Z().then(t=>{_.value=t.data,console.log(t)})}),(t,e)=>{const p=fe,v=W,O=ge,x=he,b=Y,A=G,E=X,J=H,K=pe;return c(),g(I,null,[o(A,{inline:!0,model:r,"label-width":"80px",class:"search-form"},{default:l(()=>[o(v,{prop:"nickName",label:"角色名称"},{default:l(()=>[o(p,{modelValue:r.nickName,"onUpdate:modelValue":e[0]||(e[0]=a=>r.nickName=a),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(v,{prop:"roleId",label:"角色权限"},{default:l(()=>[o(x,{modelValue:r.roleId,"onUpdate:modelValue":e[1]||(e[1]=a=>r.roleId=a),placeholder:"请选择权限",style:{width:"200px"}},{default:l(()=>[o(O,{label:"全部",value:0}),(c(!0),g(I,null,w(_.value,a=>(c(),k(O,{key:a.roleId,label:a.roleName,value:a.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(v,null,{default:l(()=>[o(b,{type:"primary",onClick:P},{default:l(()=>e[7]||(e[7]=[f("查询",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["model"]),o(J,{data:u.value,style:{width:"100%"}},{default:l(()=>[o(E,{label:"ID",prop:"id"}),o(E,{label:"姓名",prop:"nickName"}),o(E,{label:"角色",prop:"role"},{default:l(a=>[(c(!0),g(I,null,w(a.row.role,T=>(c(),k(b,{key:T.role,size:"small",type:"primary"},{default:l(()=>[f(ae(T.roleName),1)]),_:2},1024))),128))]),_:1}),o(E,{label:"操作",prop:"role"},{default:l(a=>[o(b,{type:"success",size:"small",onClick:T=>S(a.row)},{default:l(()=>e[8]||(e[8]=[f("编辑 ",-1)])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(K,{modelValue:s.value,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value=a),title:"提示",width:"30%"},{footer:l(()=>[ne("span",Oe,[o(b,{onClick:e[5]||(e[5]=a=>s.value=!1)},{default:l(()=>e[9]||(e[9]=[f("取消",-1)])),_:1,__:[9]}),o(b,{type:"primary",onClick:N},{default:l(()=>e[10]||(e[10]=[f("修改",-1)])),_:1,__:[10]})])]),default:l(()=>[o(A,{modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=a=>n.value=a)},{default:l(()=>[o(v,{label:"用户昵称","label-width":"120px"},{default:l(()=>[o(p,{modelValue:n.value.nickName,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.nickName=a),class:"w192",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(v,{label:"用户角色","label-width":"120px"},{default:l(()=>[o(x,{modelValue:n.value.role,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.role=a),multiple:!0,class:"m-2",size:"large",placeholder:"请选择角色"},{default:l(()=>[(c(!0),g(I,null,w(_.value,a=>(c(),k(O,{key:a.roleId,label:a.roleName,value:a.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),we=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Le=F({__name:"index",setup(m){const u=se(),i=h([]),_=s=>{console.log("编辑角色",s),u.push({path:"/auth",query:{roleId:s.roleId,authority:s.authority}})};q(async()=>{const s=await Z();i.value=s.data,console.log(i.value)});const r=()=>{ve.prompt("添加角色","俺要添加角色",{confirmButtonText:"确认添加",cancelButtonText:"取消添加"}).then(({value:s})=>{U({type:"success",message:`你添加的信息是:${s}`}),console.log(s),i.value.push({roleId:i.value.length+1,roleName:s})}).catch(()=>{U({type:"info",message:"取消添加"})})};return(s,n)=>{const P=Y,S=W,N=G,y=X,t=H;return c(),g("div",null,[o(N,{"label-width":"80px"},{default:l(()=>[o(S,null,{default:l(()=>[o(P,{type:"primary",onClick:n[0]||(n[0]=e=>r())},{default:l(()=>n[1]||(n[1]=[f("我要添加角色",-1)])),_:1,__:[1]})]),_:1})]),_:1}),o(t,{data:re(i),style:{width:"100%"}},{default:l(()=>[o(y,{label:"角色",prop:"roleId"}),o(y,{label:"角色名称",prop:"roleName"}),o(y,{label:"操作"},{default:l(({row:e})=>[o(P,{type:"success",plain:!0,onClick:p=>_(e)},{default:l(()=>n[2]||(n[2]=[f("修改权限",-1)])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),Re=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"})),xe={};function Ae(m,u){return c(),g("div",null,"item")}const Ce=z(xe,[["render",Ae]]),De=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./layout-CdWeJtCT.js","./element-plus-F1hSz9Da.js","./vendor-nO9PoXSl.js","../css/vendor-BUMXTAWU.css","../css/element-plus-DIPIw4wV.css","./common-DwxKJ2w1.js","../css/layout-DVvHnSY9.css","./home-B5P9YgiB.js","../css/home-BgObzQ8b.css","./index-BU4oPi4h.js","../css/index-UqVnNqO_.css","./index-B2xpQzuR.js","../css/index-o7dW-4cp.css","./index-DkqYOgAT.js","../css/index-BE1xQ_Ek.css","./login-BBHN9Pyv.js","./shared/index-2/login-yFP1Qp38.js","../css/login-C3Y_Y7x8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}