import{n as k,o as x,u as T,p as w,b as U,q as V}from"./element-plus-F1hSz9Da.js";import{d as I,b,aT as y,a2 as c,e as S,o as E,f as m,W as o,U as n,u as d,ai as v,aS as B}from"./vendor-nO9PoXSl.js";import{p as L}from"./common-DwxKJ2w1.js";import{r as q,u as C}from"./shared/index-2/login-yFP1Qp38.js";const N=I("userInfo",{state:()=>({username:"大伟",accessToken:"",roles:["common"]}),getters:{},actions:{storeUserLogin(t){return C(t).then(s=>(this.username=s.data.username,this.roles=s.data.roles,this.accessToken=s.data.accessToken,s))},stroeRefreshUserInfo(){this.username=="大伟"&&this.accessToken!=""&&q({accessToken:this.accessToken}).then(t=>{this.username=t.username,this.roles=t.roles,this.accessToken=t.accessToken}).catch(()=>{this.accessToken=""})}},persist:{key:"userInfo",storage:sessionStorage,paths:["accessToken","username","roles"]}});function F(){return N(L)}const R={class:"login-box"},H={class:"login-form"},W=b({__name:"index",setup(t){const s=F(),p=y();console.log(s);const r=c({username:"admin",password:"admin"}),f=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]});function _(){s.storeUserLogin(r).then(()=>{p.push("/")}).catch(u=>{console.error("登录失败:",u)})}return(u,e)=>{const i=x,a=k,h=U,g=V;return E(),S("div",R,[m("div",H,[e[3]||(e[3]=m("h1",null,"管理",-1)),o(g,{"show-message":"",model:r,rules:f,center:"",class:"login-info"},{default:n(()=>[o(a,{prop:"username"},{default:n(()=>[o(i,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),type:"text","prefix-icon":d(T),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),o(a,{prop:"password"},{default:n(()=>[o(i,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.password=l),type:"password","prefix-icon":d(w),placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),o(a,null,{default:n(()=>[o(h,{type:"primary",style:{width:"100%"},onClick:_},{default:n(()=>e[2]||(e[2]=[v("登录",-1)])),_:1,__:[2]})]),_:1})]),_:1},8,["model","rules"])])])}}}),G=B(W,[["__scopeId","data-v-a7883743"]]);export{G as default};
